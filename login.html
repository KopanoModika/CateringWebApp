<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <script type="module">
        // Import the necessary Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

        // Your Firebase configuration (Replace with your Firebase project credentials)
        const firebaseConfig = {
            apiKey: "AIzaSyDpqm4ffkFpNpzleTRQd3vEUGY7XDTo6_g",
            authDomain: "catering-webapp.firebaseapp.com",
            projectId: "catering-webapp",
            storageBucket: "catering-webapp.appspot.com",
            messagingSenderId: "249720880975",
            appId: "1:249720880975:web:cb520c4f8b9bdb92fc8f3a"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Function to log in a user
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('loginForm').addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent form from submitting

                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;

                // Clear any previous error message
                document.getElementById('error-message').textContent = '';

                // Firebase authentication: Sign in the user
                signInWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        // Signed in successfully
                        alert("Login successful! Welcome back, " + userCredential.user.email);
                        console.log("User logged in: ", userCredential.user);
                    })
                    .catch((error) => {
                        // Error handling
                        const errorMessage = error.message;
                        document.getElementById('error-message').textContent = errorMessage;
                        console.error("Error during login: ", error);
                    });
            });
        });
    </script>
</head>
<body>
    <h2>Login</h2>
    <form id="loginForm">
        <label for="email">Email:</label>
        <input type="email" id="email" required><br><br>

        <label for="password">Password:</label>
        <input type="password" id="password" required><br><br>

        <button type="submit">Login</button>
    </form>

    <p id="error-message" style="color:red;"></p>
</body>
</html>
